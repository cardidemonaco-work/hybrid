<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
     
    <title>Dynatrace Hybrid App! (our Mobile ADK combined with our JavaScript Agent)</title>
    <link href="styles.css" rel="stylesheet" type="text/css" media="screen" />
    
	<!-- spaceTravel with local JS Agent and cors
	<script type="text/javascript" src="javascript/dtagent630_23aprx_1305.js" data-dtconfig="tp=500,50,0|cors=1|bandwidth=300|reportUrl=http://spacetravel.clients.nasa.cpwr.corp/dynaTraceMonitor"></script>
	 -->
	
	<!-- spaceTravel with local JS Agent and no cors 
	<script type="text/javascript" src="javascript/dtagent630_23aprx_1305.js" data-dtconfig="tp=500,50,0|bandwidth=300|reportUrl=http://spacetravel.clients.nasa.cpwr.corp/dynaTraceMonitor"></script>
	-->
	
		<!-- int-us-support with local JS Agent and cors (alternate Web Server: http://prod-win.clients.nasa.cpwr.corp/dynaTraceMonitor) -->
	<script type="text/javascript" src="javascript/dtagent630_23aprx_1305.js" data-dtconfig="tp=500,50,0|cors=1|bandwidth=300|reportUrl=http://prod-win.clients.nasa.cpwr.corp/dynaTraceMonitor"></script>
	
	<!-- int-us-support with local JS Agent and cors
	<script type="text/javascript" src="javascript/dtagent630_23aprx_1305.js" data-dtconfig="tp=500,50,0|cors=1|bandwidth=300|reportUrl=https://int-us-support.compuwareapmaas.com/dynaTraceMonitor"></script> -->
	
	<!-- int-us-support with local JS Agent and no cors
	<script type="text/javascript" src="javascript/dtagent630_23aprx_1305.js" data-dtconfig="tp=500,50,0|bandwidth=300|reportUrl=https://int-us-support.compuwareapmaas.com/dynaTraceMonitor"></script>
	 -->
	 
	<!-- <script src='http://cd-dt-0602-win.clients.nasa.cpwr.corp/dtagent_bootstrap.js?app=Dynatrace+Hybrid+App'></script>
	-->
   		
	<script type="text/javascript" src="javascript/CompuwareUEM.js" ></script>
	<!-- <script type="text/javascript" src="javascript/dtagentApi.js" ></script> -->
	</head>

<body>

<script>

//START XHR call
var xhr = new XMLHttpRequest();
xhr.open("GET","http://cd-dotnet4-2.clients.nasa.cpwr.corp:200/WebServices/SalesTaxCalculator.asmx?op=CalculateSalesTaxUsingPercentage",true);
xhr.send(null);
//END XHR call

//instantiate the CompuwareUEM object in javascript:
// need to add script to UEM
var compuwareUEM = new CompuwareUEM;

var loginAction = 0;
var status = 0

console.log("#1: ");console.log(status);

loginAction = compuwareUEM.enterAction("Login Action"); //JavaScript Bridge
//var jsadkAction = dynaTrace.enterXhrAction("Login Action - bridge"); //JavaScript ADK
status = compuwareUEM.startTaggingRequests(loginAction);

console.log("#2 Start Tagging Request Status: " + status);


// ... make your web request here
// START XHR call
var xhr3 = new XMLHttpRequest();
xhr3.open("GET","http://cd-dotnet4-2.clients.nasa.cpwr.corp:200/WebServices/SalesTaxCalculator.asmx?op=CalculateSalesTax",true);
xhr3.send(null);
// END XHR call

var xhr2 = new XMLHttpRequest();
xhr2.open("GET","http://spacetravel.clients.nasa.cpwr.corp/Default.aspx",true);
xhr2.send(null);

var xhr4 = new XMLHttpRequest();
xhr4.open("GET","http://prod-win.clients.nasa.cpwr.corp/UEM-CreateAVisit/ThirdParty.aspx",true);
xhr4.send(null);

var xhr5 = new XMLHttpRequest();
xhr5.open("GET","http://cd-java.clients.nasa.cpwr.corp:8080/ajax/ajax.jsp",false);
xhr5.send(null);


//end the action
//dynaTrace.leaveXhrAction(jsadkAction); //JavaScript ADK
status = compuwareUEM.leaveAction(loginAction); // JavaScript Bridge
console.log("#3: Leave Action Status" + status);
status = compuwareUEM.flushEvents();
console.log("#4: after Flush Events" + status); 

</script>

<script type="text/javascript">
	function clickHere(){
		var compuwareUEM = new CompuwareUEM;
		action = compuwareUEM.enterAction("Clicked There");
		//document.write("hello");
		status = compuwareUEM.leaveAction(action);
	}
</script>

	<div id="menu">
		<h1>Dynatrace Hybrid App</h1>
		<ol>
		<!-- GET THIS WORKING: #include file="menu.txt" -->
			<li><a href="index.html">Home Page (index.html)</a></li><br />
			<li><a href="CompuwareUEM.html">JavaScript Bridge implementation (CompuwareUEM.html)</a></li><br />
			<li><a href="xhr-requests.html">XHR requests to a JSP and an ASPX (xhr-requests.html)</a></li><br />
			<li><a href="script-with-no-http-or-https.html">script tag has no "http:" (script-with-no-http-or-https.html)</a></li><br />
			<li><a href="endVisit.html">End this Visit using endVisit() (endVisit.html)</a></li><br />
			<li><a href="noCors.html">No cors, but same as index.html (noCors.html)</a></li><br />
			<li><a href="js-bootstrap.html">JavaScript Bootstrap Agent usage (js-bootstrap.html)</a></li><br />
			<li><a href="xhrAction.html">Create XHR Action (xhrAction.html)</a></li><br />
			<li><a href="loadInstrumentedPage.html">Load a Web Page that is Instrumented (loadInstrumentedPage.html)</a></li><br />
			<li><a href="http://prod-win.clients.nasa.cpwr.corp" target="_system">Load a Web Page that is Instrumented (http://prod-win.clients.nasa.cpwr.corp)</a></li><br />
		</ol>
	</div>
    
	<button onclick="clickHere();">Click Here!</button>
	
	
	</body>
</html>